(async function() {
        while (!Spicetify.React || !Spicetify.ReactDOM) {
          await new Promise(resolve => setTimeout(resolve, 1));
        }
var It=Object.create;var Ue=Object.defineProperty;var Vt=Object.getOwnPropertyDescriptor;var At=Object.getOwnPropertyNames;var Rt=Object.getPrototypeOf,Ot=Object.prototype.hasOwnProperty;var Ae=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ht=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of At(t))!Ot.call(e,a)&&a!==o&&Ue(e,a,{get:()=>t[a],enumerable:!(i=Vt(t,a))||i.enumerable});return e};var s=(e,t,o)=>(o=e!=null?It(Rt(e)):{},Ht(t||!e||!e.__esModule?Ue(o,"default",{value:e,enumerable:!0}):o,e));var f=Ae((Yt,Ze)=>{Ze.exports=Spicetify.React});var fe=Ae((Kt,We)=>{We.exports=Spicetify.ReactDOM});var c=Ae((Qt,qe)=>{qe.exports=Spicetify.ReactJSX});var V=s(f()),Xe=s(fe());var Re=s(c()),ve={editButton:{path:"M17.318 1.975a3.329 3.329 0 114.707 4.707L8.451 20.256c-.49.49-1.082.867-1.735 1.103L2.34 22.94a1 1 0 01-1.28-1.28l1.581-4.376a4.726 4.726 0 011.103-1.735L17.318 1.975zm3.293 1.414a1.329 1.329 0 00-1.88 0L5.159 16.963c-.283.283-.5.624-.636 1l-.857 2.372 2.371-.857a2.726 2.726 0 001.001-.636L20.611 5.268a1.329 1.329 0 000-1.879z",size:24},settings:{path:"M7.96 5.33a2.67 2.67 90 100 5.34 2.67 2.67 90 000-5.34ZM6.67 8A1.33 1.33 90 119.33 8 1.33 1.33 90 016.67 8Zm4.82-4.81a.95.94 90 01-1.1-.75L10.05.55A.47.47 90 009.68.17 8.1 8.1 90 006.32.17.47.47 90 005.96.55L5.61 2.44a.95.95 90 01-1.25.71L2.55 2.51a.47.47 90 00-.51.13C1.28 3.47.71 4.46.36 5.53a.47.47 90 00.14.51L1.97 7.28a.94.94 90 010 1.43L.5 9.95a.47.47 90 00-.14.51 7.98 7.98 90 001.68 2.9.47.47 90 00.51.13l1.81-.65a.94.94 90 011.25.72l.34 1.89c.04.18.18.33.37.37a8.1 8.1 90 003.36 0 .47.47 90 00.37-.37l.34-1.89a.95.95 90 011.25-.72l1.81.65c.18.06.38.01.51-.13.76-.84 1.34-1.82 1.68-2.9a.47.47 90 00-.14-.5L14.03 8.72a.94.94 90 010-1.44L15.5 6.04a.47.47 90 00.14-.5 7.98 7.98 90 00-1.68-2.9.47.47 90 00-.51-.13l-1.81.65a.95.95 90 01-.15.04Zm-8.82.78 1.25.44a2.28 2.28 90 003-1.73l.24-1.3a6.81 6.81 90 011.68 0l.24 1.3a2.28 2.28 90 003.01 1.73l1.24-.44c.34.44.63.93.84 1.44l-1 .85a2.27 2.27 90 000 3.48l1 .85a6.65 6.65 90 01-.84 1.44l-1.24-.44A2.28 2.28 90 009.08 13.32l-.24 1.29a6.8 6.8 90 01-1.69 0l-.23-1.29A2.28 2.28 90 003.91 11.59l-1.24.44a6.65 6.65 90 01-.84-1.44l1-.86a2.27 2.27 90 000-3.47l-1-.85c.21-.51.5-1 .84-1.44Z",size:16},github:{path:"M12.2135 0C18.947 0 24.4267 5.5 24.4066 12.3041c0 5.4391-3.4983 10.0428-8.3513 11.6728-.6065.1223-.829-.265-.829-.591 0-.4072.02-1.7315.02-3.3815 0-1.1613-.384-1.8945-.829-2.2815 2.73-.3058 5.581-1.3445 5.581-6.0708 0-1.3445-.465-2.4445-1.2537-3.3.1213-.3055.5463-1.5688-.1212-3.2595 0 0-1.0312-.326-3.3567 1.263-.9707-.2648-2.0219-.4075-3.0532-.4075A11.7425 11.7425 90 009.16 6.3556c-2.3252-1.589-3.3565-1.263-3.3565-1.263-.6675 1.6907-.2427 2.954-.1215 3.2595-.7685.8555-1.2535 1.9555-1.2535 3.3 0 4.7263 2.8509 5.7855 5.5607 6.0708-.3437.3055-.6675.8555-.7685 1.65-.7077.326-2.467.8555-3.5587-1.0185 0 0-.6472-1.1815-1.8807-1.263 0 0-1.193 0-.081.7538 0 0 .809.3665 1.355 1.7925 0 0 .7075 2.2002 4.105 1.4667 0 1.0188.02 1.9965.02 2.2818 0 .3258-.2222.713-.829.5905C3.4983 22.3472 0 17.7432 0 12.3042 0 5.5 5.4597 0 12.2135 0Z",size:24},close:{path:"M31.098 29.794 16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",size:32},warning:{path:"M13 14V9H11v5Zm0 2H11v2h2Zm8.884 3.5A1 1 0 0121 21H3a1 1 0 01-.884-1.468l9-17c.346-.654 1.422-.654 1.768 0Z",size:24},more:{path:"M3 8A1.5 1.5 0 110 8a1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",size:16},questionMark:{path:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333S7.405 20.333 12 20.333 20.333 16.595 20.333 12c0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 110 2 1 1 0 010-2Zm0-8.75a2.75 2.75 0 012.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 01-1.5 0c0-1.01.297-1.574 1.051-2.359l-.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 00-2.493-.128l-.007.128a.75.75 0 01-1.5 0A2.75 2.75 0 0112 6.75Z",size:24},dropdown:{path:"M20.4614 6.3469a1.506 1.506 90 00-2.1125.1919L12 14.1564 5.651 6.5389a1.4997 1.4997 90 10-2.3028 1.922l7.5004 9.0004a1.4992 1.4992 90 002.3028 0l7.5004-9.0005a1.5019 1.5019 90 00-.1904-2.1139Z",size:24},palette:{path:"M12 2c5.461 0 9.965 4.012 9.992 8.84 0 3.051-2.504 5.554-5.555 5.554H14.441a1.64 1.64 0 00-1.668 1.668c0 .473.148.836.438 1.125.257.29.437.688.437 1.125C13.648 21.254 12.926 22 12 22 6.5 22 2 17.5 2 12S6.5 2 12 2Z",size:24},duplicate:{path:"M15 3.5c0-.5-.5-1-1-1H11V1c0-.5-.5-1-1-1H2C1.5 0 1 .5 1 1V11.5c0 .5.5 1 1 1H4.5V15c0 .5.5 1 1 1H14c.5 0 1-.5 1-1ZM2.5 2c0-.25.25-.5.5-.5H9c.25 0 .5.25.5.5v8.5c0 .25-.25.5-.5.5H3c-.25 0-.5-.25-.5-.5Zm4 12.5c-.25 0-.5-.25-.5-.5V12.5h4c.5 0 1-.5 1-1V4h2c.25 0 .5.25.5.5V14c0 .25-.25.5-.5.5Z",size:16},terminal:{path:"M3.924 5.02a.75.75 0 011.056-.096l3 2.5a.75.75 0 010 1.152l-3 2.5a.75.75 0 11-.96-1.152L6.328 8 4.02 6.076A.75.75 0 013.924 5.02zM8.25 10.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3zM0 3.25A2.25 2.25 0 012.25 1h11.5A2.25 2.25 0 0116 3.25v9.5A2.25 2.25 0 0113.75 15H2.25A2.25 2.25 0 010 12.75v-9.5zm2.25-.75a.75.75 0 00-.75.75v9.5c0 .414.336.75.75.75h11.5a.75.75 0 00.75-.75v-9.5a.75.75 0 00-.75-.75H2.25z",size:16},customArtwork:{path:"M0 2v12a2 2 90 002 2h12a2 2 90 002-2V7.33l-1.33 1.33v5.33a.66.66 90 01-.66.66H2a.66.66 90 01-.66-.66V2A.66.66 90 012 1.34h9.66L13 0H2A2 2 90 000 2zm2.66 3.33C4.32 5 4.99 3.67 5.32 2.67h.33c.33 1 1 2.33 2.66 2.6v.33c-1.66.33-2.33 1.66-2.66 2.66h-.33c-.33-1-1-2.33-2.66-2.66zm13-2.66a1.33 1.33 90 00-1.66 0L7 9.33a0 0 90 000 0l-1.66 3a.33.33 90 00.33.33l3-1.66a0 0 90 000 0l7-7a1.33 1.33 90 000-1.33z",size:16},play:{path:"M3.3333 3.516c0-1.138 1.2173-1.8613 2.2167-1.318l8.2413 4.484c1.044.5687 1.044 2.0673 0 2.6353L5.55 13.8013C4.5507 14.3453 3.3333 13.6213 3.3333 12.484V3.516Z",size:16},pause:{path:"M3.8307 2A1.1667 1.1667 90 002.664 3.1667V12.8333C2.664 13.4773 3.1867 14 3.8307 14H6.164A1.1667 1.1667 90 007.3307 12.8333V3.1667A1.1667 1.1667 90 006.164 2H3.8307ZM9.8307 2A1.1667 1.1667 90 008.664 3.1667V12.8333C8.664 13.4773 9.1867 14 9.8307 14H12.164A1.1667 1.1667 90 0013.3307 12.8333V3.1667A1.1667 1.1667 90 0012.164 2H9.8307Z",size:16},reload:{path:"M7.98 0a7.97 7.97 0 0 0-3.365.752 8.008 8.008 0 0 0-4.227 9.715 8.006 8.006 0 0 0 9.12 5.389 8.005 8.005 0 0 0 6.474-8.385.5.5 0 0 0-.531-.467.5.5 0 0 0-.467.533 6.994 6.994 0 0 1-5.664 7.338 6.994 6.994 0 0 1-7.98-4.717 6.993 6.993 0 0 1 3.696-8.5A6.996 6.996 0 0 1 13.745 4h-3.246a.5.5 0 0 0-.5.5.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5.5.5 0 0 0-.5.5v2.215A8.014 8.014 0 0 0 7.979 0z",size:16}},Bt=e=>{let{path:t,size:o}=ve[e],i=({size:a=o,fill:n="currentColor"})=>(0,Re.jsx)("svg",{fill:n,height:a,role:"img",viewBox:`0 0 ${o} ${o}`,width:a,children:(0,Re.jsx)("path",{d:t})});return i.displayName=`Icon(${e})`,i.defaultProps={size:o,fill:"currentColor"},i},{raw:Dt,react:zt,html:Ft}=Object.keys(ve).reduce((e,t)=>(e.raw[t]=ve[t].path,e.react[t]=Bt(t),e.html[t]=`<path d="${ve[t].path}"/>`,e),{raw:{},react:{},html:{}}),S={React:zt,HTML:Ft,RAW:Dt};var C=s(c()),se=null,Oe="popup-modal-container",He=()=>{let e=document.getElementById(Oe);se&&(se.unmount(),se=null),e&&e.remove(),document.body.style.overflow="auto"},$t=(0,V.memo)(({title:e,content:t,isLarge:o,buttons:i,icon:a,onClose:n})=>{let r=(0,V.useRef)(null);(0,V.useEffect)(()=>{let d=r.current;if(d){d.addEventListener("cancel",b=>{b.preventDefault()}),d.showModal(),document.body.style.overflow="hidden";let h=()=>n();return d.addEventListener("close",h),()=>{d.removeEventListener("close",h)}}},[n]);let l=()=>{r.current?.close()},m=d=>{d.target===r.current&&l()},p=()=>(0,V.isValidElement)(t)?t:typeof t=="function"?(0,C.jsx)(t,{}):t;return(0,C.jsx)("dialog",{className:"modal",onClick:m,ref:r,children:(0,C.jsxs)("div",{className:`modal__container${o?" modal__container--large":""}`,children:[(0,C.jsxs)("div",{className:"modal__header",children:[(0,C.jsxs)("div",{className:"modal__titleContainer",children:[a&&(0,C.jsx)("div",{className:"modal__icon",children:a}),(0,C.jsx)("h1",{className:"modal__title",children:e})]}),(0,C.jsxs)("div",{className:"modal__buttonContainer",children:[i,(0,C.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:"Close",placement:"top",children:(0,C.jsx)("button",{className:"modal__button modal__button--close",onClick:l,children:(0,C.jsx)(S.React.close,{size:18})})})]})]}),(0,C.jsx)("div",{className:"modal__content",children:p()})]})})}),L=e=>{document.getElementById(Oe)&&He();let t=document.createElement("div");t.id=Oe,document.body.appendChild(t),se=(0,Xe.createRoot)(t),se.render((0,C.jsx)($t,{...e,onClose:He}))};L.hide=He;var P=s(f());var U=s(f());var E=s(c()),ye=(0,U.memo)(({value:e,options:t,onChange:o,disabled:i})=>{let a=(0,U.useId)(),n=(0,U.useRef)(null),r=`--dropdown-anchor-${a.replace(/:/g,"id")}`,l=p=>{o?.(p.value),n.current?.hidePopover()},m=t.find(p=>p.value===e)?.label||"Select...";return(0,E.jsxs)("div",{className:`dropdown${i?" dropdown--disabled":""}`,children:[(0,E.jsxs)("button",{className:"dropdown__button",disabled:i,popoverTarget:a,popoverTargetAction:"toggle",style:{anchorName:"anchorName"},children:[(0,E.jsx)("div",{className:"dropdown__text",children:m}),(0,E.jsx)("div",{className:"dropdown__arrow",children:(0,E.jsx)(S.React.dropdown,{size:12})})]}),(0,E.jsx)("div",{className:"dropdown__menu",id:a,popover:"auto",ref:n,style:{top:`calc(anchor(${r} bottom) + 4px)`,left:`anchor(${r} left)`,width:`anchor-size(${r} width)`},children:t.map(p=>(0,E.jsx)("div",{"aria-selected":e===p.value,className:`dropdown__option${e===p.value?" dropdown__option--selected":""}`,onClick:()=>l(p),onKeyDown:d=>d.key==="Enter"&&l(p),role:"option",tabIndex:0,children:p.label},p.value))})]})});var je=s(f()),Ge=s(c()),he=(0,je.memo)(({value:e,onChange:t,placeholder:o,disabled:i=!1})=>(0,Ge.jsx)("input",{className:"input",disabled:i,onChange:n=>{t(n.target.value)},placeholder:o,type:"text",value:e}));var Je=s(f()),Z=s(c()),W=(0,Je.memo)(({options:e,value:t,onChange:o,disabled:i})=>{let a=n=>{o(n.target.value)};return(0,Z.jsx)("div",{className:"radio-button",children:e.map(n=>(0,Z.jsxs)("label",{className:"radio-button__item",children:[(0,Z.jsx)("input",{checked:t===n.value,className:"radio-button__input",disabled:i,onChange:a,type:"radio",value:n.value}),(0,Z.jsx)("span",{className:"radio-button__text",children:n.label})]},n.value))})});var _=s(f()),H=s(c()),be=(0,_.memo)(({value:e,min:t=0,max:o=100,step:i=1,defaultValue:a,onChange:n,onRelease:r,disabled:l})=>{let m=(0,_.useRef)(null),p=(0,_.useRef)(!1),d=e!==void 0?e:a,h=o>t&&d!==void 0?(d-t)/(o-t)*100:0,b=(0,_.useCallback)(w=>{if(!m.current||l)return;let $=m.current.getBoundingClientRect(),Ve="touches"in w?w.touches[0].clientX:w.clientX,ne=Math.max(0,Math.min(Ve-$.left,$.width))/$.width*(o-t)+t;ne=Math.round(ne/i)*i,ne=Math.max(t,Math.min(ne,o)),n(ne)},[t,o,i,n,l]),Te=(0,_.useCallback)(w=>{l||(p.current=!0,b(w.nativeEvent))},[b,l]),Ie=(0,_.useCallback)(w=>{l||(p.current=!0,b(w.nativeEvent))},[b,l]),R=(0,_.useCallback)(()=>{p.current&&r?.(),p.current=!1},[r]),ie=(0,_.useCallback)(w=>{p.current&&(w.preventDefault(),b(w))},[b]),O=(0,_.useCallback)(w=>{p.current&&b(w)},[b]);return(0,_.useEffect)(()=>(window.addEventListener("mousemove",ie),window.addEventListener("mouseup",R),window.addEventListener("touchmove",O,{passive:!1}),window.addEventListener("touchend",R),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",R),window.removeEventListener("touchmove",O),window.removeEventListener("touchend",R)}),[ie,R,O]),(0,H.jsx)("div",{className:`slider${l?" slider--disabled":""}`,children:(0,H.jsx)("div",{className:"slider-container",onMouseDown:Te,onTouchStart:Ie,ref:m,children:(0,H.jsxs)("div",{className:"slider__track",children:[(0,H.jsx)("div",{className:"slider__fill",style:{width:`${h}%`}}),(0,H.jsx)("div",{className:"slider__thumb",style:{left:`${h}%`}})]})})})});var Ye=s(f()),we=s(c()),Se=(0,Ye.memo)(({value:e,onChange:t,disabled:o})=>(0,we.jsx)("button",{"aria-checked":e,className:"toggle",disabled:o,onClick:()=>{o||t(!e)},role:"switch",children:(0,we.jsx)("span",{className:"toggle__background",children:(0,we.jsx)("span",{className:`toggle__slider${e?" toggle__slider--enabled":""}${o?" toggle__slider--disabled":""}`})})}));var u={Log:(...e)=>console.log(`%c\u25CF \u1D17 \u25CF [Theme]%c${e.join(" ")}`,"color:#272ab0; font-weight:1000; background:#ffffff; padding:3px; border:2px solid #272ab0; border-right:none; border-radius:3px 0 0 3px;","color:#000000; background:#ffffff; padding:3px; border:2px solid #272ab0; border-left:none; border-radius:0 3px 3px 0;"),Error:(...e)=>console.error(`%c\u25CF \u1D17 \u25CF [Theme]%c${e.join(" ")}`,"color:#ff6060; font-weight:1000; background:#ffffff; padding:3px; border:2px solid #ee6969; border-right:none; border-radius:3px 0 0 3px;","color:#000000; background:#ffffff; padding:3px; border:2px solid #ee6969; border-left:none; border-radius:0 3px 3px 0;"),Warn:(...e)=>console.warn(`%c\u25CF \u1D17 \u25CF [Theme]%c${e.join(" ")}`,"color:#ee8860; font-weight:1000; background:#ffffff; padding:3px; border:2px solid #ff8860; border-right:none; border-radius:3px 0 0 3px;","color:#000000; background:#ffffff; padding:3px; border:2px solid #ff8860; border-left:none; border-radius:0 3px 3px 0;"),Debug:(...e)=>console.debug(`%c\u25CF \u1D17 \u25CF [Theme]%c${e.join(" ")}`,"color:#272ab0; font-weight:1000; background:#ffffff; padding:3px; border:2px solid #272ab0; border-right:none; border-radius:3px 0 0 3px;","color:#000000; background:#ffffff; padding:3px; border:2px solid #272ab0; border-left:none; border-radius:0 3px 3px 0;")};var g=s(c()),q=(0,P.memo)(()=>{let[e,t]=(0,P.useState)("Loading..."),[o,i]=(0,P.useState)("Loading..."),[a,n]=(0,P.useState)(!1),[r,l]=(0,P.useState)("test"),[m,p]=(0,P.useState)("option1"),[d,h]=(0,P.useState)("option1"),[b,Te]=(0,P.useState)(10),[Ie,R]=(0,P.useState)(10);(0,P.useEffect)(()=>{(async()=>{try{let $=await(await fetch("https://api.github.com/repos/veryboringhwl/spicetify/releases/latest")).json();t($.tag_name);let Ve={year:"numeric",month:"long",day:"numeric"};i(new Date($.published_at).toLocaleString("en-GB",Ve))}catch(w){u.Error("Error fetching latest version:",w),t("Error fetching"),i("Error fetching")}})()},[]);let ie={"Current Theme Version":"v1.2.0","Newest Theme Version":e,"Last Updated":o,"Spotify Version":Spicetify.Platform.version,"Spicetify Version":Spicetify.Config.version,Platform:Spicetify.Platform.PlatformData.app_platform,OS:Spicetify.Platform.PlatformData.os_name,Theme:Spicetify.Config.current_theme,Extensions:Spicetify.Config.extensions.join(", "),"Custom apps":Spicetify.Config.custom_apps.join(", "),"Colour Scheme":Spicetify.Config.color_scheme};return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"theme-version",children:Object.entries(ie).map(([O,w])=>(0,g.jsxs)("p",{className:"theme-info-item",children:[(0,g.jsxs)("span",{className:"theme-info-key encore-text-body-medium-bold",children:[O,": "]}),(0,g.jsx)("span",{className:"theme-info-value",children:w})]},O))}),(0,g.jsxs)("div",{className:"theme-test-menu",children:[(0,g.jsx)("h2",{children:"Component Test Menu"}),(0,g.jsx)("h3",{children:"Toggle Component"}),(0,g.jsx)(Se,{onChange:n,value:a}),(0,g.jsxs)("p",{children:["Current Toggle Value: ",a.toString()]}),(0,g.jsx)("h3",{children:"Input Component"}),(0,g.jsx)(he,{onChange:l,placeholder:"Type something...",value:r}),(0,g.jsxs)("p",{children:["Current Input Value: ",r]}),(0,g.jsx)("h3",{children:"Radio Button Component"}),(0,g.jsx)(W,{onChange:p,options:[{label:"Radio 1",value:"option1"},{label:"Radio 2",value:"option2"}],value:m}),(0,g.jsxs)("p",{children:["Current Radio Button Value: ",m]}),(0,g.jsx)("h3",{children:"Dropdown Component"}),(0,g.jsx)(ye,{onChange:h,options:[{label:"Dropdown 1",value:"option1"},{label:"Dropdown 2",value:"option2"}],value:d}),(0,g.jsxs)("p",{children:["Current Dropdown Value: ",d]}),(0,g.jsx)("h3",{children:"Slider Component"}),(0,g.jsx)(be,{max:100,min:10,onChange:Te,onRelease:()=>R(b),step:1,value:b}),(0,g.jsxs)("p",{children:["Current: ",b.toFixed(2)," | Released: ",Ie.toFixed(2)]})]})]})});var Qe=s(c()),Ke=()=>{Spicetify.Mousetrap.bind(["up up down down left right left right b a","v e r s i o n","s p o t i f y","s p i c e t i f y","d e b u g","t e s t"],()=>{L({title:"Theme Version / Debug",content:(0,Qe.jsx)(q,{})})})};var v={get(e,t){try{let o=localStorage.getItem(`theme:${e}`);return o!=null?JSON.parse(o):t}catch(o){return u.Error(`Error getting ${e} from localStorage:`,o),t}},set(e,t){try{let o=`theme:${e}`;localStorage.setItem(o,JSON.stringify(t));let i=new CustomEvent("theme:storage",{detail:{key:o,newValue:t}});return window.dispatchEvent(i),!0}catch(o){return u.Error(`Error setting ${e} in localStorage:`,o),!1}},addEventListener(e,t){let o=new Set(e.map(a=>`theme:${a}`)),i=a=>{let n=null;a instanceof CustomEvent&&a.type==="theme:storage"?n=a.detail.key:a instanceof StorageEvent&&(n=a.key),n&&o.has(n)&&t(a)};return window.addEventListener("theme:storage",i),window.addEventListener("storage",i),i},removeEventListener(e){window.removeEventListener("theme:storage",e),window.removeEventListener("storage",e)}};var ct=s(f());var et=s(f()),re=s(c()),X=(0,et.memo)(({resetSettings:e,saveSettings:t})=>(0,re.jsxs)("div",{className:"button-container",children:[(0,re.jsx)("button",{className:"button-container__button button-container__button--reset",onClick:e,children:"Reset"}),(0,re.jsx)("button",{className:"button-container__button button-container__button--save",onClick:t,children:"Save"})]}));var Pe=s(f());var rt=s(f());var tt=s(f());var Ce=s(c()),ot=(0,tt.memo)(({tippy:e})=>(0,Ce.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:e,placement:"top",showDelay:0,children:(0,Ce.jsx)("div",{className:"info-tippy",children:(0,Ce.jsx)(S.React.questionMark,{fill:"var(--spice-subtext)",size:20})})}));var at=s(f());var j=s(c()),it=(0,at.memo)(({option:e,value:t,onChange:o,disabled:i})=>{switch(e.type){case"toggle":return(0,j.jsx)(Se,{disabled:i,onChange:o,value:t});case"input":return(0,j.jsx)(he,{disabled:i,onChange:o,placeholder:e.placeholder,value:t});case"dropdown":return(0,j.jsx)(ye,{disabled:i,onChange:o,options:e.options||[],value:t});case"slider":return(0,j.jsx)(be,{disabled:i,max:e.max,min:e.min,onChange:o,step:e.step,value:t});case"radiobutton":return(0,j.jsx)(W,{disabled:i,onChange:o,options:e.options||[],value:t});default:return u.Warn(`Unknown option type for option "${e.name||"N/A"}"`),null}});var nt=s(f());var _e=s(c()),st=(0,nt.memo)(({name:e,popupModal:t})=>(0,_e.jsx)("button",{className:"popup-button",onClick:()=>L({title:e,content:(0,_e.jsx)(t,{}),isLarge:!1}),children:(0,_e.jsx)(S.React.editButton,{size:16})}));var x=s(c()),lt=(0,rt.memo)(({name:e,desc:t,tippy:o,popupModal:i,option:a,value:n,onChange:r,disabled:l})=>(0,x.jsxs)("div",{className:"option__row",children:[(0,x.jsxs)("div",{className:"option__content",children:[(0,x.jsx)("div",{className:"option__desc",children:t}),o&&(0,x.jsx)(ot,{tippy:o})]}),(0,x.jsxs)("div",{className:"option__control",children:[i&&(0,x.jsx)(st,{name:e,popupModal:i}),a&&(0,x.jsx)(it,{disabled:l,onChange:r||(()=>{}),option:a,value:n})]})]}));var G=s(c()),B=(0,Pe.memo)(({option:e,settings:t,onChange:o,disabled:i})=>{let a=t[e.name],n=(0,Pe.useCallback)(r=>{o(e.name,r)},[e.name,o]);return(0,G.jsxs)("div",{className:"option__item option__item--main","data-name":e.name,children:[(0,G.jsx)(lt,{desc:e.desc,disabled:i,name:e.name,onChange:n,option:e,popupModal:e.popupModal,tippy:e.tippy,value:a}),a&&e.type==="toggle"&&e.reveal&&(0,G.jsx)("div",{className:"option__item--revealed","data-name":e.name,children:e.reveal.map(r=>(0,G.jsx)(B,{disabled:i,onChange:o,option:r,settings:t},r.name))})]})});var Y=s(f());function J(e){let t={};for(let o of e)if(t[o.name]=v.get(o.name,o.defaultVal),o.type==="toggle"&&o.reveal)for(let i of o.reveal)t[i.name]=t[o.name]?v.get(i.name,i.defaultVal):!1;return t}var Ne=e=>{let[t,o]=(0,Y.useState)(()=>J(e)),i=(0,Y.useCallback)((r,l)=>{o(m=>({...m,[r]:l}))},[]),a=(0,Y.useCallback)(()=>{let r=Object.fromEntries(e.map(l=>[l.name,l.defaultVal]));o(r),e.forEach(l=>{v.set(l.name,l.defaultVal),l.run?.(l.defaultVal)}),Spicetify.showNotification("Settings reset to default.")},[e]),n=(0,Y.useCallback)(()=>{let r=[];Object.entries(t).forEach(([l,m])=>{let p=v.get(l,null);JSON.stringify(p)!==JSON.stringify(m)&&(v.set(l,m),r.push(l),e.find(h=>h.name===l)?.run?.(m))}),r.length>0?(u.Log(`Saving modal settings: ${r.join(", ")}`),Spicetify.showNotification("Modal settings saved.")):Spicetify.showNotification("No changes to save.")},[t,e]);return{settings:t,handleSettingChange:i,resetSettings:a,saveSettings:n}};var D=s(c()),K=[{type:"toggle",name:"album-banner-page",desc:"Puts album art in places",defaultVal:!0,run(e){document.documentElement.classList.toggle("album-banner-page",e)}},{type:"toggle",name:"home-page",desc:"Adds Dynamic backgrounds to Home Page",defaultVal:!1,run(e){document.documentElement.classList.toggle("home-page",e)}},{type:"toggle",name:"lyrics-page",desc:"Adds Dynamic backgrounds to Lyrics Page",defaultVal:!0,tippy:"Includes Spotify Lyrics page and Spicetify's Lyrics Plus",run(e){document.documentElement.classList.toggle("lyrics-page",e)}},{type:"toggle",name:"playlist-page",desc:"Adds Dynamic backgrounds to your Playlist Pages",defaultVal:!0,run(e){document.documentElement.classList.toggle("playlist-page",e)}},{type:"toggle",name:"artist-page",desc:"Adds Dynamic backgrounds to Artist Pages",defaultVal:!0,run(e){document.documentElement.classList.toggle("artist-page",e)}},{type:"toggle",name:"album-page",desc:"Adds Dynamic backgrounds to Album Pages",defaultVal:!0,run(e){document.documentElement.classList.toggle("album-page",e)}},{type:"toggle",name:"misc-page",desc:"Adds Dynamic backgrounds to Misc Pages",defaultVal:!0,tippy:"Enables album art for Station, Collection, Show, Episode, Genre, User",run(e){document.documentElement.classList.toggle("misc-page",e)}}],mt=(0,ct.memo)(()=>{let{settings:e,handleSettingChange:t,resetSettings:o,saveSettings:i}=Ne(K);return(0,D.jsxs)("div",{className:"settings-modal",children:[(0,D.jsx)("div",{className:"settings-modal__options",children:K.map(a=>(0,D.jsx)(B,{onChange:t,option:a,settings:e},a.name))}),(0,D.jsx)("div",{className:"settings-modal__buttons",children:(0,D.jsx)(X,{resetSettings:o,saveSettings:i})})]})});var pt=s(f());var k=async(e,t=50)=>{let o=1;for(;!document.querySelector(e)&&o<t;)o++,await new Promise(i=>setTimeout(i,100));return document.querySelector(e)||null};var z=s(c()),Q=[{type:"toggle",name:"windows-control",desc:"Enable custom Windows Controls",defaultVal:!1,run:e=>{document.documentElement.classList.toggle("windows-control",e)}},{type:"toggle",name:"hide-windows-control",desc:"Removes Spotifys Windows Controls completely",defaultVal:!1,run:async e=>{if(document.documentElement.classList.contains("WindowsControl")){let t=await k(".CCIGxtpAreSdwWRo14FE"),o=await k(".main-topBar-topbarContentRight");e?(Spicetify.Platform.ControlMessageAPI._updateUiClient.setButtonsVisibility({showButtons:!1},{}),Spicetify.Platform.ControlMessageAPI._updateUiClient.updateTitlebarHeight({height:1},{}),t&&(t.style.display="none"),o&&(o.style.paddingRight="8px")):(Spicetify.Platform.ControlMessageAPI._updateUiClient.setButtonsVisibility({showButtons:!0},{}),Spicetify.Platform.ControlMessageAPI._updateUiClient.updateTitlebarHeight({height:64},{}),t&&(t.style.display=""),o&&(o.style.paddingRight=""))}}},{type:"input",name:"windows-control-brightness",desc:"Set Brightness",defaultVal:"2.12",run(e){document.documentElement.classList.contains("windows-control")&&document.documentElement.style.setProperty("--windows-control-brightness",e)}},{type:"input",name:"windows-control-top",desc:"Set Top",defaultVal:"16px",run(e){document.documentElement.classList.contains("windows-control")&&document.documentElement.style.setProperty("--windows-control-top",e)}},{type:"input",name:"windows-control-width",desc:"Set Width",defaultVal:"135px",run(e){document.documentElement.classList.contains("windows-control")&&document.documentElement.style.setProperty("--windows-control-width",e)}},{type:"input",name:"windows-control-height",desc:"Set Height",defaultVal:"32px",run(e){document.documentElement.classList.contains("windows-control")&&document.documentElement.style.setProperty("--windows-control-height",e)}}],dt=(0,pt.memo)(()=>{let{settings:e,handleSettingChange:t,resetSettings:o,saveSettings:i}=Ne(Q);return(0,z.jsxs)("div",{className:"settings-modal",children:[(0,z.jsx)("div",{className:"settings-modal__options",children:Q.map(a=>(0,z.jsx)(B,{onChange:t,option:a,settings:e},a.name))}),(0,z.jsx)("div",{className:"settings-modal__buttons",children:(0,z.jsx)(X,{resetSettings:o,saveSettings:i})})]})});var T=s(c()),le=({message:e="",keyPrefix:t="custom-notif",autoHideDuration:o=3e3,backgroundColour:i="#fff",colour:a="#000",isWarning:n=!1})=>{let r=n?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(S.React.warning,{size:24}),(0,T.jsx)("span",{children:e})]}):(0,T.jsx)("span",{children:e}),l=n?"#ff9800":i,m=n?"#fff":a;try{Spicetify.Snackbar.enqueueCustomSnackbar(t,{keyPrefix:t,autoHideDuration:o,children:(0,T.jsx)("div",{className:"custom-notification",style:{display:"flex",gap:"8px",alignItems:"center",color:m,backgroundColor:l,padding:"14px 16px",borderRadius:"4px",fontSize:"0.875rem"},children:r})})}catch(p){u.Error("Error displaying notification:",p)}};var Be=null,De=null,ut=async e=>{if(e==="default"){document.querySelector("style.customColourScheme")?.remove();return}try{if(!Be){let a=await fetch("https://raw.githubusercontent.com/veryboringhwl/spicetify/main/dist/color.ini");if(!a.ok)throw new Error("Failed to fetch color.ini");Be=await a.text()}De||(De=Be.split(/[\r\n]+/).reduce((a,n)=>{let r=n.trim();if(r.startsWith(";")||r==="")return a;let l=r.match(/^\[([^\]]+)\]$/);if(l)a[l[1]]={};else{let m=r.match(/^([^=]+?)\s*=\s*(.+)$/);if(m){let[,p,d]=m,h=Object.keys(a).pop();h&&(a[h][p]=d.split(";")[0].trim())}}return a},{}));let t=De[e];if(!t)return;let o=Object.entries(t).reduce((a,[n,r])=>{if(!r)return a;let l=r.length===3?r.split("").map(m=>parseInt(m+m,16)).join(", "):r.match(/\w\w/g)?.map(m=>parseInt(m,16)).join(", ");return`${a}--spice-${n}:#${r};--spice-rgb-${n}:${l};`},":root{")+"}",i=document.querySelector("style.customColourScheme");i||(i=document.createElement("style"),i.classList.add("customColourScheme"),document.body.appendChild(i)),i.textContent=o}catch{le({isWarning:!0,autoHideDuration:1e4,message:"Unable to fetch the colour scheme options. You won't be able to change the colour scheme."})}};var gt={Home:{regex:/^\/$/,key:"home-page"},Playlist:{regex:/^\/playlist\//,key:"playlist-page"},Album:{regex:/^\/album\//,key:"album-page"},Artist:{regex:/^\/artist\/(?!artists\b)\w+$/,key:"artist-page"},Lyrics:{regex:/^\/lyrics$/,key:"lyrics-page"},LyricsPlus:{regex:/^\/lyrics-plus$/,key:"lyrics-page"},Station:{regex:/^\/station\/playlist\//,key:"misc-page"},Collection:{regex:/^\/collection\/tracks$/,key:"misc-page"},Show:{regex:/^\/show\//,key:"misc-page"},Episode:{regex:/^\/episode\//,key:"misc-page"},User:{regex:/^\/user\/(?!users\b)\w+$/,key:"misc-page"},Genre:{regex:/^\/genre\//,key:"misc-page"}},ft=async()=>{for(;!Spicetify.Player.data?.item;)await new Promise(o=>setTimeout(o,10));let e=document.querySelector(".banner-image")||(()=>{let o=document.createElement("div");return o.className="banner-image",document.querySelector(".before-scroll-node")?.appendChild(o),o})(),t=()=>{let o=Spicetify.Player.data?.item?.metadata?.image_xlarge_url?.replace("spotify:image:","https://i.scdn.co/image/"),i=Object.values(gt).some(({regex:a,key:n})=>v.get(n,!1)&&a.test(Spicetify.Platform.History.location.pathname));document.documentElement.style.setProperty("--image",o?`url(${o})`:"none"),e.style.display=i?"":"none"};v.addEventListener(Object.values(gt).map(({key:o})=>o),t),Spicetify.Player.addEventListener("songchange",t),Spicetify.Platform.History.listen(t),t()};var vt=async e=>{if(!Spicetify.Platform.ProductStateAPI?.productStateApi)return;let t={default:{"app-developer":"0"},developer:{"app-developer":"2"}},o=t[e]||t.default,i=async(a,n)=>(await Spicetify.Platform.ProductStateAPI.productStateApi.putValues({pairs:{[a]:n}}),Spicetify.Platform.ProductStateAPI.productStateApi.subValues({keys:[a]},r=>{r[a]!==n&&Spicetify.Platform.ProductStateAPI.productStateApi.putValues({pairs:{[a]:n}})}));window.appDevListener&&window.appDevListener.cancel(),window.appDevListener=await i("app-developer",o["app-developer"])};var ce=null,me=null,yt=e=>{let t=e.querySelectorAll(".main-globalNav-navLink, ._b3hhmbWtOY8_1M1mM1H");for(let o of t)if(!o.querySelector(".main-globalNav-iconText")){let i=o.getAttribute("aria-label")||(o.querySelector("input")?"Search":"");if(i){let a=document.createElement("div");a.className="main-globalNav-iconText encore-text-body-medium-bold",a.textContent=i,o.appendChild(a)}}};async function Ut(){let e=await k(".Root__globalNav");if(!e)return;yt(e),ce=new MutationObserver(()=>yt(e)),ce.observe(e,{childList:!0,subtree:!0});let o=()=>{let i=Spicetify.Platform.LocalStorageAPI.getItem("left-sidebar-state");document.documentElement.classList.toggle("collapsed",i===1)};me=i=>{i.data.key==="left-sidebar-state"&&o()},Spicetify.Platform.LocalStorageAPI.getEvents().addListener("update",me),o()}function Zt(){document.documentElement.classList.remove("collapsed"),ce&&(u.Log("Removing AppleMusic observer"),ce.disconnect(),ce=null),me&&(u.Log("Removing AppleMusic sidebar state listener"),Spicetify.Platform.LocalStorageAPI.getEvents().removeListener("update",me),me=null),document.querySelectorAll(".main-globalNav-iconText").forEach(e=>e.remove())}function ht(e){Zt(),e&&Ut()}var pe=null,de=null,bt=e=>{let t=e.querySelectorAll(".main-globalNav-navLink, ._b3hhmbWtOY8_1M1mM1H");for(let o of t)if(!o.querySelector(".main-globalNav-iconText")){let i=o.getAttribute("aria-label")||(o.querySelector("input")?"Search":"");if(i){let a=document.createElement("div");a.className="main-globalNav-iconText encore-text-body-medium-bold",a.textContent=i,o.appendChild(a)}}};async function Wt(){let e=await k(".Root__globalNav");if(!e)return;bt(e),pe=new MutationObserver(()=>bt(e)),pe.observe(e,{childList:!0,subtree:!0});let t=()=>{let o=Spicetify.Platform.LocalStorageAPI.getItem("left-sidebar-state");document.documentElement.classList.toggle("collapsed",o===1)};de=o=>{o.data.key==="left-sidebar-state"&&t()},Spicetify.Platform.ControlMessageAPI._updateUiClient.updateTitlebarHeight({height:40}),Spicetify.Platform.LocalStorageAPI.getEvents().addListener("update",de),t()}function qt(){document.documentElement.classList.remove("collapsed"),pe&&(u.Log("Removing LibXUI observer"),pe.disconnect(),pe=null),de&&(u.Log("Removing LibXUI sidebar state listener"),Spicetify.Platform.LocalStorageAPI._events.removeListener("update",de),de=null),Spicetify.Platform.ControlMessageAPI._updateUiClient.updateTitlebarHeight({height:64}),document.querySelectorAll(".main-globalNav-iconText").forEach(e=>e.remove())}function wt(e){qt(),e&&Wt()}var ee=null,ue=null,St=async e=>{let t=await k(".main-nowPlayingBar-volumeBar");if(!t)return;let o=t.querySelector(".vol-percent");ee&&(Spicetify.Platform.PlaybackAPI._events.removeListener("volume",ee),ee=null);let i=o?.querySelector(".vol-input");if(i&&ue&&(i.removeEventListener("change",ue),ue=null),o?.remove(),t.style.flex="",e){let a=document.createElement("div");a.className="vol-percent",a.style.display="inline-flex",a.style.alignItems="center",a.innerHTML=`
      <input type="text" class="vol-input" style="width: 30px; font-size: 15px; border: none; background: transparent; text-align: right;">
      <span style="font-size: 15px;">%</span>
    `,t.appendChild(a),t.style.flex="0 1 200px";let n=a.querySelector(".vol-input");if(!n)return;ee=()=>{n.value=String(Math.round(Spicetify.Player.getVolume()*100))},ue=()=>{let r=parseInt(n.value,10);!isNaN(r)&&r>=0&&r<=100&&Spicetify.Player.setVolume(r/100)},n.addEventListener("change",ue),Spicetify.Platform.PlaybackAPI._events.addListener("volume",ee),ee()}};var N={Features:[{type:"radiobutton",name:"colour-scheme",desc:"Colour Scheme",defaultVal:"default",options:[{value:"default",label:"Default"},{value:"dark",label:"Dark"},{value:"light",label:"Light"},{value:"bloom",label:"Bloom"},{value:"spotify",label:"Spotify"}],tippy:"Default uses the colour scheme set in config-xpui.ini",run(e){ut(e)}},{type:"dropdown",name:"spotify-mode",desc:"Spotify mode",defaultVal:"default",tippy:"Only takes effect after a restart",options:[{value:"default",label:"Default"},{value:"developer",label:"Developer"}],run(e){vt(e)}},{type:"toggle",name:"album-banner-page",desc:"Puts Track cover art in various pages",defaultVal:!0,popupModal:mt,run(e){document.documentElement.classList.toggle("album-banner-page",e),ft()}},{type:"toggle",name:"volume-percentage",desc:"Adds volume percentage next to volume slider",defaultVal:!0,run(e){St(e)}},{type:"toggle",name:"windows-control",desc:"Adjusts brightness and position of windows controls",defaultVal:!1,tippy:"This will override the themes default windows controls",popupModal:dt,run:e=>{document.documentElement.classList.toggle("windows-control",e)}},{type:"input",name:"spotify-font",desc:"Spotify font",defaultVal:"SpotifyMixUI",placeholder:"SpotifyMixUI",tippy:"This will only work if you have the font installed locally",run(e){document.documentElement.style.setProperty("--FontFamily",e)}}],Layouts:[{type:"toggle",name:"libx-ui",desc:"Restores the old UI >2024 (Pre Global Nav Bar)",defaultVal:!1,incompatible:["AppleMusic"],tippy:"Incompatible with AppleMusic",run(e){document.documentElement.classList.toggle("libx-ui",e),wt(e)},reveal:[{type:"toggle",name:"highlight-navlinks",desc:"Adds highlights to the selected page",defaultVal:!0,run(e){document.documentElement.classList.toggle("highlight-navlinks",e)}},{type:"toggle",name:"pre-libx-ui",desc:"Restores the old UI >2023 (Pre LibraryX)",defaultVal:!1,run(e){document.documentElement.classList.toggle("pre-libx-ui",e)}},{type:"toggle",name:"compact-library",desc:"Uses compact sidebar",defaultVal:!1,tippy:"Broken if library is collapsed",run(e){document.documentElement.classList.toggle("compact-library",e)}}]},{type:"toggle",name:"apple-music-ui",desc:"Changes the UI to look like Apple Music",defaultVal:!1,incompatible:["LibX","switchlayout","TestLayout","greenicon"],tippy:"Incompatible with LibX, Switchlayout, greenicon and testlayout",run(e){document.documentElement.classList.toggle("apple-music-ui",e),ht(e)}},{type:"toggle",name:"modern-layout",desc:"Reorders play button to start and cover art to middle",incompatible:["AppleMusic"],tippy:"Incompatible with AppleMusic",defaultVal:!0,run(e){document.documentElement.classList.toggle("modern-layout",e)}},{type:"toggle",name:"switch-grid-layout",desc:"Uses different grid layout",incompatible:["AppleMusic"],tippy:"Incompatible with AppleMusic",defaultVal:!0,run(e){document.documentElement.classList.toggle("switch-grid-layout",e)}}],Snippets:[{type:"toggle",name:"hide-tracklist-numbers",desc:"Hides tracklist numbers in various pages",defaultVal:!0,run(e){document.documentElement.classList.toggle("hide-tracklist-numbers",e)}},{type:"toggle",name:"green-navLink-icons",desc:"Makes Navlinks green",incompatible:["AppleMusic"],tippy:"Incompatible with AppleMusic",defaultVal:!0,run(e){document.documentElement.classList.toggle("green-navLink-icons",e)}},{type:"toggle",name:"transparent-playbutton",desc:"Make the play/pause button transparent",defaultVal:!0,run(e){document.documentElement.classList.toggle("transparent-playbutton",e)}},{type:"toggle",name:"lyrics-only-npv",desc:"Show lyrics only in Now playing view",defaultVal:!1,run(e){document.documentElement.classList.toggle("lyrics-only-npv",e)}},{type:"toggle",name:"no-gradient",desc:"Remove the coloured gradient from header",defaultVal:!0,run(e){document.documentElement.classList.toggle("no-gradient",e)}}],Test:[{type:"toggle",name:"test-toggle",desc:"test-toggle",defaultVal:!0,popupModal:q,incompatible:["test-incompatible-toggle","test-incompatible-input","test-incompatible-dropdown"],tippy:"Incompatible with test-incompatible"},{type:"toggle",name:"test-incompatible-toggle",desc:"test-incompatible-toggle",defaultVal:!0},{type:"input",name:"test-incompatible-input",desc:"test-incompatible-input",defaultVal:1,placeholder:"does something"},{type:"dropdown",name:"test-incompatible-dropdown",desc:"test-incompatible-dropdown",defaultVal:"test1",options:[{value:"test1",label:"test1"},{value:"test2",label:"test2"},{value:"test3",label:"test3"},{value:"test4",label:"test4"}]},{type:"input",name:"test-input",desc:"test-input",defaultVal:1,placeholder:"does something"},{type:"dropdown",name:"test-dropdown",desc:"test-dropdown",defaultVal:"test1",options:[{value:"test1",label:"test1"},{value:"test2",label:"test2"},{value:"test3",label:"test3"},{value:"test4",label:"test4"}]},{type:"radiobutton",name:"test-radiobutton",desc:"test-radiobutton",defaultVal:"test1",options:[{value:"test1",label:"test1"},{value:"test2",label:"test2"},{value:"test3",label:"test3"},{value:"test4",label:"test4"}]},{type:"toggle",name:"test-reveal",desc:"test-reveal",defaultVal:!0,reveal:[{type:"toggle",name:"revealed-toggle",desc:"revealed-toggle",defaultVal:!0},{type:"input",name:"revealed-input",desc:"revealed-input",defaultVal:"true"},{type:"dropdown",name:"revealed-dropdown",desc:"revealed-dropdown",defaultVal:"test1",options:[{value:"test1",label:"test1"},{value:"test2",label:"test2"},{value:"test3",label:"test3"},{value:"test4",label:"test4"}]}]}]};var te=({settings:e,changedOptions:t=[]})=>{try{Object.values(N).flat().forEach(i=>{let{name:a,run:n}=i,r=e[a];t.includes(a)&&n&&n(r)})}catch(o){u.Error("Failed to apply options:",o)}};var Ct=()=>{u.Log("Initialising options");let e=[...Object.values(N).flat(),...K,...Q];e.forEach(o=>{v.get(o.name,null)===null&&v.set(o.name,o.defaultVal),o.type==="toggle"&&o.reveal&&o.reveal.forEach(i=>{v.get(i.name,null)===null&&v.set(i.name,i.defaultVal)})});let t=J(e);return te({settings:t,changedOptions:Object.keys(t)}),t};var kt=s(fe());var oe=s(f()),_t=s(fe()),Me=s(c());function Le({titleText:e,descriptionText:t,cancelText:o="Cancel",confirmText:i="Confirm",onConfirm:a,onClose:n,onOpen:r,onOutside:l,allowHTML:m}){let p=(0,oe.memo)(()=>{let[d,h]=(0,oe.useState)(!0),b=document.querySelector(".ReactModalPortal:last-of-type");return(0,oe.useEffect)(()=>{d&&r?.()},[d,r]),(0,Me.jsx)(Spicetify.ReactComponent.RemoteConfigProvider,{configuration:Spicetify.Platform.RemoteConfiguration,children:(0,Me.jsx)(Spicetify.ReactComponent.ConfirmDialog,{allowHTML:m,cancelText:o,confirmText:i,descriptionText:t,isOpen:d,onClose:()=>{h(!1),n?.(),b?.remove()},onConfirm:()=>{h(!1),a?.(),b?.remove()},onOutside:()=>{h(!1),l?.(),b?.remove()},titleText:e})})});_t.default.createRoot(document.createElement("div")).render((0,Me.jsx)(p,{}))}var ze={Reload:()=>{location.reload()},Restart:()=>{Spicetify.Platform.LifecycleAPI.restart()},Stop:()=>{Spicetify.Platform.LifecycleAPI.shutdown()}};var Ee=e=>{Le({titleText:"Reset Settings?",descriptionText:"This will restore all theme settings to their default values.",confirmText:"Reset",onConfirm:()=>{try{u.Log("Resetting settings to default");let t=[...Object.values(N).flat(),...K,...Q],o={};t.forEach(i=>{o[i.name]=i.defaultVal,i.type==="toggle"&&i.reveal&&i.reveal.forEach(a=>{o[a.name]=a.defaultVal})}),Object.entries(o).forEach(([i,a])=>{v.set(i,a)}),e(o),te({settings:o,changedOptions:Object.keys(o)}),Spicetify.showNotification("Settings have been reset.")}catch(t){u.Error("Failed to reset settings:",t),Spicetify.showNotification("Failed to reset settings.",!0)}}})};var A=s(f());var ae=s(f()),Fe=s(c()),Pt=(0,ae.memo)(({categories:e,selectedCategory:t,onSelectCategory:o})=>{let i=(0,ae.useRef)(null);return(0,ae.useEffect)(()=>{let a=i.current,n=r=>{a&&(a.scrollLeft+=r.deltaY,r.preventDefault())};return a?.addEventListener("wheel",n,{passive:!1}),()=>a?.removeEventListener("wheel",n)},[]),(0,Fe.jsx)("div",{className:"carousel",ref:i,children:e.map(a=>(0,Fe.jsx)("button",{className:`carousel__button ${t===a?"carousel__button--active":""}`,onClick:()=>o(a),children:a},a))})});var Nt=s(f());var ge=s(c()),Xt=Object.values(N).flat(),Mt=(0,Nt.memo)(({category:e,categoryOptions:t,settings:o,onChange:i})=>(0,ge.jsxs)("div",{className:`option__category option__category--${e.toLowerCase()}`,children:[(0,ge.jsx)("h2",{className:"option__category-title",children:e}),t.map(a=>{let n=Xt.some(r=>r.incompatible?.includes(a.name)&&o[r.name]);return(0,ge.jsx)(B,{disabled:n,onChange:i,option:a,settings:o},a.name)})]}));var xe=s(f());var Lt=e=>{try{let t=[];return Object.entries(e).forEach(([o,i])=>{let a=v.get(o,null);JSON.stringify(a)!==JSON.stringify(i)&&(v.set(o,i),t.push(o))}),t.length>0?(u.Log(`Saving settings: ${t.join(", ")}`),te({settings:e,changedOptions:t}),Spicetify.showNotification("Settings saved.")):Spicetify.showNotification("No changes to save."),e}catch(t){return u.Error("Failed to save settings:",t),Spicetify.showNotification("Failed to save settings.",!0),e}};var Et=()=>{let e=Object.values(N).flat(),[t,o]=(0,xe.useState)(()=>J(e)),i=(0,xe.useCallback)((a,n)=>{o(r=>{let l={...r,[a]:n},m=e.find(p=>p.name===a);return m?.type==="toggle"&&m.reveal&&!n&&m.reveal.forEach(p=>{l[p.name]=!1}),n&&m?.incompatible&&m.incompatible.forEach(p=>{l[p]=!1}),l})},[e]);return{settings:t,handleSettingChange:i,resetSettings:()=>Ee(o),saveSettings:()=>{let a=Lt(t);o(a)}}};var ke=s(f());var I=s(c());var xt=(0,ke.memo)(({settings:e})=>{let[t,o]=(0,ke.useState)("home"),a=Object.entries(e).filter(([l,m])=>l.startsWith("test-")||l.startsWith("revealed-")||["colour-scheme","spotify-font","spotify-mode","volume-percentage"].includes(l)?!1:m).map(([l,m])=>typeof m=="boolean"?l:`${l}-${m}`).join(" "),n=e["colour-scheme"]||"default",r=e["spotify-font"]||"SpotifyMixUI";return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"preview__header",children:[(0,I.jsx)("h2",{children:"Preview"}),(0,I.jsx)(W,{onChange:o,options:[{label:"Home",value:"home"},{label:"Playlist",value:"playlist"}],value:t})]}),(0,I.jsx)("div",{className:"preview__spotify-app","colour-scheme":n,data:a.trim(),style:{"--preview-font-family":r}})]})});var M=s(c()),$e=(0,A.memo)(()=>{let{settings:e,handleSettingChange:t,resetSettings:o,saveSettings:i}=Et(),a=N,n=["All",...Object.keys(a)],[r,l]=(0,A.useState)("All"),m=(0,A.useCallback)(d=>{l(d)},[]),p=(0,A.useMemo)(()=>r==="All"?Object.entries(a):Object.entries(a).filter(([d])=>d===r),[r,a]);return(0,M.jsxs)("div",{className:"settings-menu",children:[(0,M.jsx)("div",{className:"settings-menu__carousel",children:(0,M.jsx)(Pt,{categories:n,onSelectCategory:m,selectedCategory:r})}),(0,M.jsx)("div",{className:"settings-menu__options",children:p.map(([d,h])=>(0,M.jsx)(Mt,{category:d,categoryOptions:h,onChange:t,settings:e},d))}),(0,M.jsx)("div",{className:"settings-menu__preview",children:(0,M.jsx)(xt,{settings:e})}),(0,M.jsx)("div",{className:"settings-menu__buttons",children:(0,M.jsx)(X,{resetSettings:o,saveSettings:i})})]})});var y=s(c()),Tt=()=>{let e="settings-menu-popover",t=document.getElementById(e),o=()=>t?.hidePopover?.(),i=n=>{n.preventDefault(),t?.showPopover?.()};t||(t=document.createElement("div"),t.id=e,t.style.cssText="top: calc(anchor(--SettingsButton bottom) + 8px); left: anchor(--SettingsButton left); background: transparent; overflow: visible;",t.popover="auto",document.body.appendChild(t),kt.default.createRoot(t).render((0,y.jsxs)(Spicetify.ReactComponent.Menu,{children:[(0,y.jsx)(Spicetify.ReactComponent.MenuItem,{leadingIcon:(0,y.jsx)("svg",{dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.repeat},fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16"}),onClick:()=>{o(),Ee(()=>{})},children:"Reset theme"},"reset-theme"),(0,y.jsx)(Spicetify.ReactComponent.MenuItem,{leadingIcon:(0,y.jsx)("svg",{dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.repeat},fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16"}),onClick:()=>{ze.Reload(),o()},children:"Reload Spotify"},"reload-spotify"),(0,y.jsx)(Spicetify.ReactComponent.MenuItem,{divider:"after",leadingIcon:(0,y.jsx)("svg",{dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.locked},fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16"}),onClick:()=>{ze.Restart(),o()},children:"Restart Spotify"},"restart-spotify"),(0,y.jsx)(Spicetify.ReactComponent.MenuItem,{divider:"after",leadingIcon:(0,y.jsx)("svg",{dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.check},fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16"}),onClick:()=>{Le({titleText:"Confirm Dialog",descriptionText:"Are you <b>sure</b>?",onOutside:()=>Spicetify.showNotification("Clicked outside"),allowHTML:!0}),o()},children:"Confirm Dialog"},"confirm-dialog"),(0,y.jsx)(Spicetify.ReactComponent.MenuItem,{leadingIcon:(0,y.jsx)("svg",{dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.subtitles},fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16"}),onClick:()=>{L({title:"Theme Settings",content:$e}),o()},children:"Theme Settings"},"theme-settings-menu"),(0,y.jsx)(Spicetify.ReactComponent.MenuItem,{leadingIcon:(0,y.jsx)("svg",{dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons.menu},fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16"}),onClick:()=>{L({title:"Test Menu",content:q}),o()},children:"Test Menu"},"test-menu")]})));let a=new Spicetify.Topbar.Button("Theme Settings",`<svg viewBox="0 0 16 16" width="16px" height="16px" fill="currentColor">${S.HTML.settings}</svg>`,()=>{L({title:"Theme Settings",content:(0,y.jsx)($e,{}),isLarge:!0,buttons:(0,y.jsx)(Spicetify.ReactComponent.TooltipWrapper,{label:"GitHub",placement:"top",children:(0,y.jsx)("button",{className:"modal__button modal__button--github",onClick:()=>window.open("https://github.com/veryboringhwl/spicetify"),children:(0,y.jsx)(S.React.github,{size:18})})}),icon:(0,y.jsx)(S.React.settings,{size:30})})},!1,!0);a.element.oncontextmenu=i,a.element.style.anchorName="--SettingsButton"};var F=s(c());async function jt(){await Promise.race([(async()=>{for(await new Promise(l=>Spicetify.Events.webpackLoaded.on(l));!(Spicetify.Snackbar.enqueueCustomSnackbar&&Spicetify.Snackbar.enqueueSnackbar&&Spicetify.Platform.ProductStateAPI.productStateApi);)await new Promise(l=>setTimeout(l,100))})(),new Promise((l,m)=>setTimeout(()=>m("Initialization timeout"),5e3))]).catch(l=>{console.log(`${l}: Failed to initialize after ${5e3/1e3} seconds. Some features may not work.`),le({autoHideDuration:1e4,isWarning:!0,message:(0,F.jsxs)("span",{children:[l,": Failed to initialize after ",5e3/1e3," seconds. Some features may not work."]})})}),u.Log("Spicetify theme initialising"),Spicetify.Mousetrap.bind(["escape"],()=>{Spicetify.PopupModal.hide()});let t=69,o=69,[i,a,n]=Spicetify.Platform.version.split(".").map(Number);n>=t&&n<=o||le({autoHideDuration:5e3,isWarning:!0,message:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("span",{children:["Theme supports Spotify v1.2.",t," to v1.2.",o,". Your version: ",i,".",a,".",n," may not work."]})})}),Ke(),Tt(),Ct(),u.Log("Spicetify theme initialised")}jt();
})();
